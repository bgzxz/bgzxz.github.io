<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
   <meta name="apple-mobile-web-app-capable" content="yes" />
   <meta name="apple-mobile-web-app-status-bar-style" content="black" />
   <!-- <link rel="apple-touch-icon" href="http://s0-weizhifeng-net.b0.upaiyun.com/touch-icon-iphone.png" /> -->
   <link rel="apple-touch-icon-precomposed" href="http://s0-weizhifeng-net.b0.upaiyun.com/touch-icon-iphone-precomposed.png" />
   <link rel="apple-touch-icon" sizes="72x72" href="http://s0-weizhifeng-net.b0.upaiyun.com/touch-icon-ipad.png" />
   <link rel="apple-touch-icon" sizes="114x114" href="http://s0-weizhifeng-net.b0.upaiyun.com/touch-icon-iphone-retina.png" />
   <link rel="apple-touch-icon" sizes="144x144" href="http://s0-weizhifeng-net.b0.upaiyun.com/touch-icon-ipad-retina.png" />
   
   <title>跨浏览器的Inline-Block</title>
   <meta name="author" content="Jeremy Wei" />
   <link href="http://feeds.feedburner.com/JeremyWei" rel="alternate" title="Jeremy Wei" type="application/atom+xml" />
   <link rel="shortcut icon" type="image/x-icon" href="http://s0-weizhifeng-net.b0.upaiyun.com/favicon.ico">
   
   <!-- syntax highlighting CSS -->
   <link rel="stylesheet" href="http://s0-weizhifeng-net.b0.upaiyun.com/css/syntax.css?20130623" type="text/css" />
   
   <!-- Homepage CSS -->
   <link rel="stylesheet" href="http://s0-weizhifeng-net.b0.upaiyun.com/css/screen.css?20130721v1" type="text/css" media="screen, projection" />
   <!-- <link rel="stylesheet" href="/css/screen.css?072122" type="text/css" media="screen, projection" /> -->
   
   <script type="text/javascript" charset="utf-8">
   // Mobile Safari in standalone mode
   if(("standalone" in window.navigator) && window.navigator.standalone){
	   
   	// If you want to prevent remote links in standalone web apps opening Mobile Safari, change 'remotes' to true
   	var noddy, remotes = true;
	
   	document.addEventListener('click', function(event) {
		
   		noddy = event.target;
		
   		// Bubble up until we hit link or top HTML element. Warning: BODY element is not compulsory so better to stop on HTML
   		while(noddy.nodeName !== "A" && noddy.nodeName !== "HTML") {
   	        noddy = noddy.parentNode;
   	    }
		
   		if('href' in noddy && noddy.href.indexOf('http') !== -1 && (noddy.href.indexOf(document.location.host) !== -1 || remotes))
   		{
   			event.preventDefault();
   			document.location.href = noddy.href;
   		}
	
   	},false);
   }
   </script>
</head>
<body>
	
<div class="site">
  <pre class="nav margin-for-mobile">{"<a href='/tech.html'>文</a>", "<a href='/translate.html'>譯</a>", "<a href='/poem.html'>詩</a>", "<a href='/5000years.html'>國史</a>", "<a href='/resume.html'>己</a>"}</pre>
  <br />
  <div id="post">
	<h1>跨浏览器的Inline-Block</h1>
	<div class="copyright">
	作者: JeremyWei | 可以转载, 但必须以超链接形式标明文章原始出处和作者信息及版权声明<br />
	网址: http://weizhifeng.net/cross-browser-inline-block.html
	</div>

	<p>啊，inline-block，如此的让人难以琢磨，并且又有诱人的显示方式宣传，只是其承诺的很多，兑现的却如此少。我已经收到这样的PSD文件有很多次：</p>

<p><img src="http://blog.mozilla.org/webdev/files/2009/02/gallery-view.jpg" title="gallery-view" alt="gallery-view" /></p>

<p>看了之后我就开始哭了。</p>

<p>通常情况下，这个类型的布局是小菜一碟。固定宽度，固定高度，左侧浮动（<code>float:left</code>），然后就完成了。但但但是，这个设计需要与可变数量的内容一起工作，也就是说如果这些块中的一个比其他块拥有更多的内容，它将会破坏整个布局：</p>

<p><img src="http://blog.mozilla.org/webdev/files/2009/02/float-broken.jpg" title="float-broken" alt="float-broken" /></p>

<p>由于第一个画廊项目比其他的高，所以第五个项目就相对于它进行左侧浮动而不是位于它下面。总体上来说我们想要一个拥有表格一样伸缩性的布局，但真正合适的应该是一个语义标记。</p>

<p>我们以拥有一个无序列表，并且<code>display</code>被设置为<code>inline-block</code>的一个简单页面开始：</p>

<pre><code>&lt;ul&gt;
    &lt;li&gt;
        &lt;h4&gt;This is awesome&lt;/h4&gt;
        &lt;img src="http://farm4.static.flickr.com/3623/3279671785_d1f2e665b6_s.jpg"
        alt="lobster" width="75" height="75"/&gt;
    &lt;/li&gt;
...
&lt;ul&gt;

&lt;style&gt;
    li {
        width: 200px;
        min-height: 250px;
        border: 1px solid #000;
        display: inline-block;
        margin: 5px;
    }
&lt;/style&gt;
</code></pre>

<p>在Firefox 3，Safari 3和Opera中看起来OK：</p>

<p><img src="http://blog.mozilla.org/webdev/files/2009/02/step1.jpg" title="step1" alt="step1" /></p>

<p>明显的，垂直对齐有点问题。恩，但这并不是真正的有问题，因为这是正确的行为，但这不是我们想要的。</p>

<p>这儿发生的事情是每个<code>&lt;li&gt;</code>的<a href="http://dev.w3.org/csswg/css3-linebox/#baseline">baseline</a>是以父元素<code>&lt;ul&gt;</code>的baseline来对齐的。什么是baseline，你问道？一图抵千言：</p>

<p><img src="http://blog.mozilla.org/webdev/files/2009/02/baseline.gif" alt="baseline" /></p>

<p>baseline是那条穿过上面文字的黑线。行内（inline）或者行内块（inline-block）元素的<a href="http://www.w3.org/TR/CSS21/visudet.html#propdef-vertical-align">默认垂直对齐的值</a>是baseline，也就是说元素的baseline将会与其父元素的baseline进行对齐。这是第一个包含基准线在内的行内块：</p>

<p><img src="http://blog.mozilla.org/webdev/files/2009/02/baseline-inline-block.jpg" alt="baseline-inline-block" /></p>

<p>你可以看见，每个基准线都和文本“This is the baseline”的基准线所对齐。那个文本并没有在一个<code>&lt;li&gt;</code>之中，它只是父元素<code>&lt;ul&gt;</code>的一个简单的文本节点，用来标识父元素的基准线在哪。</p>

<p>但是，解决这个问题的方法很简单：<code>vertical-align:top</code>，其效果是一个好看的网格：
<img src="http://blog.mozilla.org/webdev/files/2009/02/inline-block-2.jpg" alt="inline-block-2" /></p>

<p>除了它仍然不在Firefox 2，IE 6和7中工作以外。</p>

<p><img src="http://blog.mozilla.org/webdev/files/2009/02/inline-block-ff2.jpg" alt="inline-block-ff2" /></p>

<p>让我们来开始处理Firefox 2。</p>

<p>Firefox 2不支持行内块，但是它支持一个显示效果与行内块一样，Mozilla所特有的显示属性<code>-moz-inline-stack</code>。当我们把它加到<code>display:inline-block</code>前面，FF2将会忽略那个声明（译者注：即<code>display:inline-block</code>）并保持<code>-moz-inline-stack</code>，因为它不支持行内块。支持行内块的浏览器将会使用它（译者注：<code>display:inline-block</code>），并且忽略前面的显示属性（译者注：<code>-moz-inline-stack</code>）。</p>

<pre><code>&lt;style&gt;
    li {
        width: 200px;
        min-height: 250px;
        border: 1px solid #000;
        display: -moz-inline-stack;
        display: inline-block;
        vertical-align: top;
        margin: 5px;
    }
&lt;/style&gt;
</code></pre>

<p>不幸的是，它有一个小bug：</p>

<p><img src="http://blog.mozilla.org/webdev/files/2009/02/inline-block-3.jpg" alt="inline-block-3" /></p>

<p>老实说，我不知道什么导致了这个bug。但是这儿有快速解决的方法。把<code>&lt;li&gt;</code>中的所有内容包含在一个<code>&lt;div&gt;</code>之中。</p>

<pre><code>&lt;li&gt;
        &lt;div&gt;
            &lt;h4&gt;This is awesome&lt;/h4&gt;
            &lt;img src="http://farm4.static.flickr.com/3623/3279671785_d1f2e665b6_s.jpg"
            alt="lobster" width="75" height="75"/&gt;
        &lt;/div&gt;
&lt;/li&gt;
</code></pre>

<p>这好像<code>reset</code>了<code>&lt;li&gt;</code>中的一切，然后适当的展示它们。</p>

<p><img src="http://blog.mozilla.org/webdev/files/2009/02/inline-block-2.jpg" alt="inline-block-2" /></p>

<p>现在，我们来看IE7。IE7不支持行内块，但是我们可以用小把戏让它来渲染<code>&lt;li&gt;</code>，就好像它们是行内块一样。应该怎么做？<a href="http://haslayout.net/haslayout">hasLayout</a>，一个为所有乐趣而生的IE魔法属性。你不能以<code>hasLayout:true;</code>或者以任何类似这样的形式给一个元素明确的设置<code>hasLayout</code>，但是你可以使用其他的声明比如<code>zoom:1</code>来触发它。</p>

<p>从技术上来说，<code>hasLayout</code>意味着一个设置了<code>hasLayout</code>的元素要对自己和其子元素的渲染负责（把它们通过<code>min-height</code>和<code>width</code>属性组合起来，然后你就得到了与<code>display:block</code>很像的行为）。它就像魔法仙尘一样，你可以把它们洒在渲染问题上，然后这些问题就烟消云散了。</p>

<p>当我们向<code>&lt;li&gt;</code>元素中加入<code>zoom:1</code>和<code>*display:inline</code>（<a href="http://www.ejeliot.com/blog/63">star hack to target IE6 &amp; 7)</a>）的时候，我们就使得IE7以<code>inline-block</code>的形式显示它们：</p>

<pre><code>&lt;style&gt;
    li {
        width: 200px;
        min-height: 250px;
        border: 1px solid #000;
        display: -moz-inline-stack;
        display: inline-block;
        vertical-align: top;
        margin: 5px;
        zoom: 1;
        *display: inline;
    }
&lt;/style&gt;
</code></pre>

<p><img src="http://blog.mozilla.org/webdev/files/2009/02/inline-block-ie7.jpg" alt="inline-block-ie7" /></p>

<p>呼！（译者注：松口气）基本上完成了。就剩下IE 6了：</p>

<p><img src="http://blog.mozilla.org/webdev/files/2009/02/inline-block-ie6.jpg" alt="inline-block-ie6" /></p>

<p>IE 6不支持<code>min-height</code>，但是很感谢（译者注：反讽）其对<code>height</code>属性的不正确处理，所以我们可以用它来代替。设置<code>_height</code>（<a href="http://www.ejeliot.com/blog/63">IE6 underscore hack</a>）的值为250px将会使所有<code>&lt;li&gt;</code>元素的高度为250px，并且如果它们内容超过了这个值，它们将会展开来进行适配。所有其他浏览器会忽略<code>_height</code>。</p>

<p>那么经过所有的努力之后，这就是最终的CSS和HTML了：</p>

<pre><code>&lt;style&gt;
    li {
        width: 200px;
        min-height: 250px;
        border: 1px solid #000;
        display: -moz-inline-stack;
        display: inline-block;
        vertical-align: top;
        margin: 5px;
        zoom: 1;
        *display: inline;
        _height: 250px;
    }
&lt;/style&gt;

&lt;li&gt;
        &lt;div&gt;
            &lt;h4&gt;This is awesome&lt;/h4&gt;
            &lt;img src="http://farm4.static.flickr.com/3623/3279671785_d1f2e665b6_s.jpg"
            alt="lobster" width="75" height="75"/&gt;
        &lt;/div&gt;
&lt;/li&gt;
</code></pre>

<p>原文：<a href="http://blog.mozilla.org/webdev/2009/02/20/cross-browser-inline-block/">http://blog.mozilla.org/webdev/2009/02/20/cross-browser-inline-block/</a></p>

	(完)

	<div class="post-info">
		06 Jul 2013  
	
		
	
		
	</div>
	
	<!-- disqus start -->
	<div id="disqus_thread"></div>
	<script type="text/javascript">
	    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
	    var disqus_shortname = 'jeremywei'; // required: replace example with your forum shortname

	    /* * * DON'T EDIT BELOW THIS LINE * * */
	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();
	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
	<!-- disqus end -->

	<!-- related start -->
	<div id="related">
	  <h2>相关内容</h2>
	  <ul class="posts">
	    
	      <li><span>21 Jul 2013</span> &raquo; <a href="/viewports.html">两个viewport的故事（第一部分）</a></li>
	    
	      <li><span>14 Jul 2013</span> &raquo; <a href="/a-pixel-is-not.html">不是像素的像素不是像素</a></li>
	    
	      <li><span>06 Jul 2013</span> &raquo; <a href="/make-web-app-more-native.html">把你的网站改造成一个iOS Web App</a></li>
	    
	      <li><span>30 Jun 2013</span> &raquo; <a href="/css-underscore-hack.html">The Underscore Hack</a></li>
	    
	      <li><span>29 Jun 2013</span> &raquo; <a href="/css-21-selectors-part-3.html">CSS 2.1选择器第三部分</a></li>
	    
	  </ul>
	</div>
	<!-- related end -->
</div>
  
<div class="footer"></div>
<div class="power">  
  Powered by <a href="http://github.com/" targe="_blank">Github</a> &nbsp;&amp;&amp;&nbsp; <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> 
</div>
</div>

<a href="http://github.com/jeremywei" target="_blank">
	<img class="right-banner first" src="http://s0-weizhifeng-net.b0.upaiyun.com/images/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub" />
</a>

<a href="http://www.phptherightway.com" target="_blank">
    <img class="right-banner second" src="http://s0-weizhifeng-net.b0.upaiyun.com/images/php-the-right-way-120x60.png" alt="PHP: The Right Way"/>
</a>
</body>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-5179718-7']);
  _gaq.push(['_setDomainName', 'weizhifeng.net']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</html>
